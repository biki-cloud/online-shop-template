import { db } from "./drizzle";
import {
  users,
  products,
  carts,
  cartItems,
  orders,
  orderItems,
  pushSubscriptions,
} from "./schema";

async function resetDatabase() {
  console.log("ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆä¸­...");

  try {
    // å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ãŒã‚ã‚‹ãŸã‚ã€å‰Šé™¤é †åºãŒé‡è¦
    await db.delete(orderItems);
    await db.delete(orders);
    await db.delete(cartItems);
    await db.delete(carts);
    await db.delete(pushSubscriptions);
    await db.delete(products);
    await db.delete(users);

    console.log("âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚»ãƒƒãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ");
    process.exit(0);
  } catch (error) {
    console.error("âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error);
    process.exit(1);
  }
}

resetDatabase();
